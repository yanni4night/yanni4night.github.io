<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"yanni4night.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="人过不留名 雁过不留声">
<meta property="og:url" content="https://yanni4night.github.io/page/6/index.html">
<meta property="og:site_name" content="人过不留名 雁过不留声">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Yanni4night">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://yanni4night.github.io/page/6/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/6/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>人过不留名 雁过不留声</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SVVTY641FP"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-SVVTY641FP","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?102a03a6de835cd378834b32e2639fbe"></script>







  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">人过不留名 雁过不留声</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">夜莺</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Yanni4night"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Yanni4night</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">62</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/yanni4night" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yanni4night" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yanni4night@gmail.com" title="E-Mail → mailto:yanni4night@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://yanni4night.github.io/2014/09/07/2014-09-07-error-in-javascript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Yanni4night">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/09/07/2014-09-07-error-in-javascript/" class="post-title-link" itemprop="url">Error in JavaScript</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-09-07 00:00:00" itemprop="dateCreated datePublished" datetime="2014-09-07T00:00:00+08:00">2014-09-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-11 18:44:30" itemprop="dateModified" datetime="2022-04-11T18:44:30+08:00">2022-04-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/error-exception-throw-try-catch-%E5%BC%82%E5%B8%B8/" itemprop="url" rel="index"><span itemprop="name">error exception throw try catch 异常</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/09/07/2014-09-07-error-in-javascript/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/09/07/2014-09-07-error-in-javascript/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>类似于 <a target="_blank" rel="noopener" href="http://zh.wikipedia.org/wiki/Java">Java</a> 语言中将异常（Exception）分为 <code>CheckedException</code> 和 <code>RuntimeException</code>一样，<a target="_blank" rel="noopener" href="http://www.ecma-international.org/publications/standards/Ecma-262.htm">ECMA262</a> 定义 <a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-16">Error</a> 分为“早期错误（early error）”与“运行时错误（runtime error）”。</p>
<p>“早期错误”意即能够在程序进行任意构造求值操作之前检测到并报出的错误，包含下面几类：</p>
<ol>
<li>语法错误；</li>
<li>对同一个属性定义多个 setter 或多个 getter；</li>
<li>对同一个属性同时定义 value 和 setter&#x2F;getter；</li>
<li>正则表达式语法错误；</li>
<li><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-10.1.1">严格模式</a>中有 重复的属性赋值；</li>
<li><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-10.1.1">严格模式</a>中使用 <a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-12.10">wi th</a> 关键字；</li>
<li>独立<a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-10.1.1">严格模式</a>下的 函数定义中具有重复的参数定义；</li>
<li><code>return</code>，<code>break</code> 和 <code>continue</code> 的不合适使用；</li>
<li>向非引用赋值</li>
</ol>
<p> 除了这些错误以外都属于运行时错误，不同的错误类型将会对程序带来一定的影响，例如：</p>
<pre><code>&lt;script&gt;var i =0  j = 0;&lt;/script&gt;
&lt;script&gt;
    ++i;
    syntax error
&lt;/script&gt;
&lt;script&gt;
    ++j;
    throw new Error(&#39;runtime error&#39;);
&lt;/script&gt;
&lt;script&gt;
    console.log(i + &#39;/&#39; + j);//0/1
&lt;/script&gt;
</code></pre>
<p>内建的 Error 包含下面几种类型：</p>
<ul>
<li>EvalError</li>
<li>InternalError</li>
<li>RangeError</li>
<li>ReferenceError</li>
<li>SyntaxError</li>
<li>TypeError</li>
<li>URIError</li>
</ul>
<h6 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h6><ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error</a></li>
<li><a target="_blank" rel="noopener" href="http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx">http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://yanni4night.github.io/2014/09/07/2014-09-07-es3-to-es5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Yanni4night">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/09/07/2014-09-07-es3-to-es5/" class="post-title-link" itemprop="url">ES3 to ES5(Extended)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-09-07 00:00:00" itemprop="dateCreated datePublished" datetime="2014-09-07T00:00:00+08:00">2014-09-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-11 18:44:30" itemprop="dateModified" datetime="2022-04-11T18:44:30+08:00">2022-04-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/js/" itemprop="url" rel="index"><span itemprop="name">js</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/09/07/2014-09-07-es3-to-es5/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/09/07/2014-09-07-es3-to-es5/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>List of ES3 Incompatibilities introduced by ES5.</p>
<p>From <a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-E">Annex E</a>:</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-7.1">7.1</a>: Unicode format control characters are no longer stripped from ECMAScript source text before processing. In Edition 5  if such a character appears in a StringLiteral or RegularExpressionLiteral the character will be incorporated into the literal where in Edition 3 the character would not be incorporated into the literal. </p>
<p> (function () {<br>   return eval(‘“\u200C\u200D\uFEFF”.length  &#x3D;&#x3D; 3’);<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      return eval('"\u200C\u200D\uFEFF".length  == 3');
    })());
</script>


<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-7.2">7.2</a>: Unicode character <BOM> is now treated as whitespace and its presence in the middle of what appears to be an identifier could result in a syntax error which would not have occurred in Edition 3. </p>
<p> (function () {<br>   try {<br> eval(‘var foo\uFEFFbar’);<br>   } catch (e) {<br> return e instanceof SyntaxError;<br>   }<br> })()</p>
 <script>
 document.write('Test Result:' + (function () {
 try {
 eval('var foo\uFEFFbar');
 } catch (e) {
 return e instanceof SyntaxError;
 }
 })());
 </script>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-7.3">7.3</a>: Line terminator characters that are preceded by an escape sequence are now allowed within a string literal token. In Edition 3 a syntax error would have been produced. </p>
<p> (function () {<br>   try {<br> eval(“‘foo\\nbar’;”);<br> return true;<br>   } catch (e) {<br> return false;<br>   }<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
    try {
    eval("'foo\\\nbar';");
    return true;
    } catch (e) {
    return false;
    }
})());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-7.3">7.3</a>: Regular expression literals now return a unique object each time the literal is evaluated. This change is detectable by any programs that test the object identity of such literal values or that are sensitive to the shared side effects. </p>
<p> (function () {<br>   function re(){ return &#x2F;(?:)&#x2F;; }<br>   return re() !&#x3D;&#x3D; re();<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      function re(){ return /(?:)/; }
      return re() !== re();
    })());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-7.8.5">7.8.5</a>: Edition 5 requires early reporting of any possible RegExp constructor errors that would be produced when converting a RegularExpressionLiteral to a RegExp object. Prior to Edition 5 implementations were permitted to defer the reporting of such errors until the actual execution time creation of the object. </p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-7.8.5">7.8.5</a>: In Edition 5 unescaped “&#x2F;“ characters may appear as a CharacterClass in a regular expression literal. In Edition 3 such a character would have been interpreted as the final character of the literal. </p>
<p> (function () {<br>   try {<br> var re &#x3D; eval(‘&#x2F;[&#x2F;]&#x2F;‘);<br> return re.test(‘&#x2F;‘);<br>   } catch (e) {<br> return false;<br>   }<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      try {
        var re = eval('/[/]/');
        return re.test('/');
      } catch (e) {
        return false;
      }
    })());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-10.4.2">10.4.2</a>: In Edition 5  indirect calls to the eval function use the global environment as both the variable environment and lexical environment for the eval code. In Edition 3  the variable and lexical environments of the caller of an indirect eval was used as the environments for the eval code. </p>
<p> (function (global) {<br>   &#x2F;&#x2F;TODO: maybe try other types of indirect calls<br>   return (function () { return global &#x3D;&#x3D;&#x3D; (0 eval)(‘this’); }).call({});<br> })(this);</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function (global) {
      //TODO: maybe try other types of indirect calls
      return (function () { return global === (0 eval)('this'); }).call({});
    })(this));
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4">15.4.4</a>: In Edition 5 all methods of Array.prototype are intentionally generic. In Edition 3 toString and toLocaleString were not generic and would throw a TypeError exception if applied to objects that were not instances of Array. </p>
<p> (function () {<br>   try {<br> Array.prototype.toString.call({});<br> Array.prototype.toLocaleString.call({});<br> return true;<br>   } catch (e) {<br> return false;<br>   }<br> });</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      try {
        Array.prototype.toString.call({});
        Array.prototype.toLocaleString.call({});
        return true;
      } catch (e) {
        return false;
      }
    }()));
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-10.6">10.6</a>: In Edition 5 the array indexed properties of argument objects that correspond to actual formal parameters are enumerable. In Edition 3  such properties were not enumerable. </p>
<p> (function () {<br>   return arguments.propertyIsEnumerable(‘0’);<br> })(0);</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      return arguments.propertyIsEnumerable('0');
    })(0));
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-10.6">10.6</a>: In Edition 5 the value of the [[Class]] internal property of an arguments object is “Arguments”. In Edition 3  it was “Object”. This is observable if toString is called as a method of an arguments object. </p>
<p> (function () {<br>   return ({}).toString.call(arguments) &#x3D;&#x3D; “[object Arguments]”;<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      return ({}).toString.call(arguments) == "[object Arguments]";
    })());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-12.6.4">12.6.4</a>: for-in statements no longer throw a TypeError if the in expression evaluates to null or undefined. Instead  the statement behaves as if the value of the expression was an object with no enumerable properties. </p>
<p> (function () {<br>   try {<br> for(var prop in null);<br> for(prop in undefined);<br>   } catch (e) {<br> return false;<br>   }<br>   return true;<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      try {
        for(var prop in null);
        for(prop in undefined);
      } catch (e) {
        return false;
      }
      return true;
    })());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15">15</a>: Implementations are now required to ignore extra arguments to standard built-in methods unless otherwise explicitly specified. In Edition 3 the handling of extra arguments was unspecified and implementations were explicitly allowed to throw a TypeError exception. </p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.1">15.1.1</a>: The value properties NaN  Infinity  and undefined of the Global Object have been changed to be read-only properties. </p>
<p> (function (_NaN  _Infinity  _undefined) {<br>   NaN &#x3D; Infinity &#x3D; undefined &#x3D; null;<br>   if (!isNaN(NaN) || Infinity !&#x3D; _Infinity || undefined !&#x3D;&#x3D; _undefined) {<br> &#x2F;&#x2F;TODO: restore values<br> return false;<br>   }<br>   return true;<br> })(NaN  Infinity);</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function (_NaN  _Infinity  _undefined) {
      NaN = Infinity = undefined = null;
      if (!isNaN(NaN) || Infinity != _Infinity || undefined !== _undefined) {
        //TODO: restore values
        return false;
      }
      return true;
    })(NaN  Infinity));
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.2.1">15.1.2.1</a>: Implementations are no longer permitted to restrict the use of eval in ways that are not a direct call. In addition  any invocation of eval that is not a direct call uses the global environment as its variable environment rather than the caller’s variable environment. </p>
<p> (function (global) {<br>   try {<br> return [eval]<a href="'this'">0</a> &#x3D;&#x3D;&#x3D; global;<br>   } catch (e) {<br> return false;<br>   }<br> }).call({}  this);</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function (global) {
      try {
        return [eval][0]('this') === global;
      } catch (e) {
        return false;
      }
    }).call({}  this));
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.2.2">15.1.2.2</a>: The specification of the function parseInt no longer allows implementations to treat Strings beginning with a 0 character as octal values. </p>
<p> (function () {<br>   return parseInt(‘010’) &#x3D;&#x3D;&#x3D; 10;<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      return parseInt('010') === 10;
    })());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.4.3">15.3.4.3</a>: In Edition 3  a TypeError is thrown if the second argument passed to Function.prototype.apply is neither an array object nor an arguments object. In Edition 5  the second argument may be any kind of generic array-like object that has a valid length property. </p>
<p> (function () {<br>   try {<br> return (function (a  b) { return a + b &#x3D;&#x3D; 10; }).apply({}  {0:5  1:5  length:2});<br>   } catch (e) {<br> return false;<br>   }<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      try {
        return (function (a  b) { return a + b == 10; }).apply({}  {0:5  1:5  length:2});
      } catch (e) {
        return false;
      }
    })());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.4.3">15.3.4.3</a>  <a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.4.4">15.3.4.4</a>: In Edition 3 passing undefined or null as the first argument to either Function.prototype.apply or Function.prototype.call causes the global object to be passed to the indirectly invoked target function as the this value. If the first argument is a primitive value the result of calling ToObject on the primitive value is passed as the this value. In Edition 5  these transformations are not performed and the actual first argument value is passed as the this value. This difference will normally be unobservable to existing ECMAScript Edition 3 code because a corresponding transformation takes place upon activation of the target function. However  depending upon the implementation  this difference may be observable by host object functions called using apply or call. In addition  invoking a standard built-in function in this manner with null or undefined passed as the this value will in many cases cause behaviour in Edition 5 implementations that differ from Edition 3 behaviour. In particular  in Edition 5 built-in functions that are specified to actually use the passed this value as an object typically throw a TypeError exception if passed null or undefined as the this value. </p>
<p> (function () {<br>   try {<br> &#x2F;&#x2F;Maybe test ({}).toString.call(null) &#x3D;&#x3D; ‘[object Null]’<br> return ({}).hasOwnProperty.call(null  ‘’)  false;<br>   } catch (e) {<br> &#x2F;&#x2F;ToObject in hasOwnProperty should throw TypeError if null<br> return true;<br>   }<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      try {
        //Maybe test ({}).toString.call(null) == '[object Null]'
        return ({}).hasOwnProperty.call(null  '')  false;
      } catch (e) {
        //ToObject in hasOwnProperty should throw TypeError if null
        return true;
      }
    })());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.5.2">15.3.5.2</a>: In Edition 5  the prototype property of Function instances is not enumerable. In Edition 3  this property was enumerable. </p>
<p> !Function.propertyIsEnumerable(‘prototype’);</p>
</li>
</ul>
<script>
    document.write('Test Result:' + !Function.propertyIsEnumerable('prototype'));
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.5.2">15.5.5.2</a>: In Edition 5  the individual characters of a String object’s [[PrimitiveValue] may be accessed as array indexed properties of the String object. These properties are non-writable and non-configurable and shadow any inherited properties with the same names. In Edition 3  these properties did not exist and ECMAScript code could dynamically add and remove writable properties with such names and could access inherited properties with such names. </p>
<p> (function () {<br>   String.prototype[1] &#x3D; ‘x’;<br>   var foo &#x3D; new String(‘foo’);<br>   foo[0] &#x3D; ‘y’; &#x2F;&#x2F;non-writable<br>   delete foo[0]; &#x2F;&#x2F;non-configurable<br>   return foo[0] &#x3D;&#x3D; ‘f’ &amp;&amp; foo[1] &#x3D;&#x3D; ‘o’;<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      String.prototype[1] = 'x';
      var foo = new String('foo');
      foo[0] = 'y'; //non-writable
      delete foo[0]; //non-configurable
      return foo[0] == 'f' && foo[1] == 'o';
    })());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.4.2">15.9.4.2</a>: Date.parse is now required to first attempt to parse its argument as an ISO format string. Programs that use this format but depended upon implementation specific behaviour (including failure) may behave differently. </p>
<p> (function () {<br>   try{<br> return !!Date.parse(“2014-09-07T15:24:08.011Z”);<br>   }catch(e){<br> return false;<br>   }<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      try{
        return !!Date.parse("2014-09-07T15:24:08.011Z");
      }catch(e){
        return false;
      }
    })());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.2.12">15.10.2.12</a>: In Edition 5  \s now additionally matches &lt;BOM&gt;. </p>
<p> (function () {<br>   return &#x2F;\s&#x2F;.test(‘\uFEFF’);<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      return /\s/.test('\uFEFF');
    })());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.4.1">15.10.4.1</a>: In Edition 3  the exact form of the String value of the source property of an object created by the RegExp constructor is implementation defined. In Edition 5  the String must conform to certain specified requirements and hence may be different from that produced by an Edition 3 implementation. </p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.6.4">15.10.6.4</a>: In Edition 3  the result of RegExp.prototype.toString need not be derived from the value of the RegExp object’s source property. In Edition 5 the result must be derived from the source property in a specified manner and hence may be different from the result produced by an Edition 3 implementation. </p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.11.2.1">15.11.2.1</a>  <a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.11.4.3">15.11.4.3</a>: In Edition 5  if an initial value for the message property of an Error object is not specified via the Error constructor the initial value of the property is the empty String. In Edition 3  such an initial value is implementation defined.</p>
<p> (function () {<br>   var error &#x3D; new Error();<br>   return typeof error.message &#x3D;&#x3D; ‘string’ &amp;&amp; error.message.length &#x3D;&#x3D; 0;<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      var error = new Error();
      return typeof error.message == 'string' && error.message.length == 0;
    })());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.11.4.4">15.11.4.4</a>: In Edition 3  the result of Error.prototype.toString is implementation defined. In Edition 5  the result is fully specified and hence may differ from some Edition 3 implementations. </p>
<p> (function () {<br>   var foo &#x3D; new Error  bar &#x3D; new Error;<br>   foo.name &#x3D; ‘Foo’;<br>   foo.message &#x3D; bar.name &#x3D; ‘Bar’;<br>   return foo.toString() &#x3D;&#x3D; ‘Foo: Bar’ &amp;&amp; bar.toString() &#x3D;&#x3D; ‘Bar’;<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      var foo = new Error  bar = new Error;
      foo.name = 'Foo';
      foo.message = bar.name = 'Bar';
      return foo.toString() == 'Foo: Bar' && bar.toString() == 'Bar'; 
    })());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.12">15.12</a>: In Edition 5  the name JSON is defined in the global environment. In Edition 3  testing for the presence of that name will show it to be undefined unless it is defined by the program or implementation.</p>
<p> (function (global) {<br>   return typeof global.JSON !&#x3D; ‘undefined’;<br> })(this);</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function (global) {
      return typeof global.JSON != 'undefined';
    })(this));
</script>

<p>From <a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-D">Annex D</a>:</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-11.8.2">11.8.2</a>  <a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-11.8.3">11.8.3</a>  <a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-11.8.5">11.8.5</a>: ECMAScript generally uses a left to right evaluation order  however the Edition 3 specification language for the &gt; and &lt;&#x3D; operators resulted in a partial right to left order. The specification has been corrected for these operators such that it now specifies a full left to right evaluation order. However  this change of order is potentially observable if side-effects occur during the evaluation process. </p>
<p> (function(){<br>   var i &#x3D; 1  j &#x3D; 1;<br>   (i*&#x3D;2) &gt; 1 &gt; (i+&#x3D;1);<br>   (j*&#x3D;2) &lt;&#x3D; 1 &lt;&#x3D; (j+&#x3D;1);<br>   return 3 &#x3D;&#x3D;&#x3D; i &amp;&amp; 3 &#x3D;&#x3D;&#x3D; j;<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function(){
    var i = 1  j = 1;
    (i*=2) > 1 > (i+=1);
    (j*=2) <= 1 <= (j+=1);
    return 3 === i && 3 === j;
})());

</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-11.1.4">11.1.4</a>: Edition 5 clarifies the fact that a trailing comma at the end of an ArrayInitializer does not add to the length of the array. This is not a semantic change from Edition 3 but some implementations may have previously misinterpreted this. </p>
<p> (function () {<br> return [1 ].length &#x3D;&#x3D;&#x3D; 1;<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
        return [1 ].length === 1;
    })());
</script>

<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-11.2.3">11.2.3</a>: Edition 5 reverses the order of steps 2 and 3 of the algorithm. The original order as specified in Editions 1 through 3 was incorrectly specified such that side-effects of evaluating Arguments could affect the result of evaluating MemberExpression. </p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-12.4">12.4</a>: In Edition 3  an object is created  as if by new Object() to serve as the scope for resolving the name of the exception parameter passed to a catch clause of a try statement. If the actual exception object is a function and it is called from within the catch clause  the scope object will be passed as the this value of the call. The body of the function can then define new properties on its this value and those property names become visible identifiers bindings within the scope of the catch clause after the function returns. In Edition 5  when an exception parameter is called as a function  undefined is passed as the this value. </p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-13">13</a>: In Edition 3  the algorithm for the production FunctionExpression with an Identifier adds an object created as if by new Object() to the scope chain to serve as a scope for looking up the name of the function. The identifier resolution rules (Section 10.1.4 in Edition 3) when applied to such an object will  if necessary  follow the object’s prototype chain when attempting to resolve an identifier. This means all the properties of Object.prototype are visible as identifiers within that scope. In practice most implementations of Edition 3 have not implemented this semantics. Edition 5 changes the specified semantics by using a Declarative Environment Record to bind the name of the function. </p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.6">15.10.6</a>: RegExp.prototype is now a RegExp object rather than an instance of Object. The value of its [[Class]] internal property which is observable using Object.prototype.toString is now “RegExp” rather than “Object”.</p>
<p> (function () {<br>   return ({}).toString.call(RegExp.prototype) &#x3D;&#x3D; ‘[object RegExp]’;<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      return ({}).toString.call(RegExp.prototype) == '[object RegExp]';
    })());
</script>

<p>Other changes:</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-11.5.1">11.5.1</a>: A PropertyName in a PropertyAssignment  can consist of an<br> IdentifierName  this makes possible to use Reserved Words.</p>
<p> (function () {<br>   var obj;<br>   try {<br> eval(‘obj &#x3D; {if:1}’);<br> return obj[‘if’] &#x3D;&#x3D; 1;<br>   } catch (e) {<br> return false;<br>   }<br> })();</p>
</li>
</ul>
<script>
document.write('Test Result:' + (function () {
      var obj;
      try {
        eval('obj = {if:1}');
        return obj['if'] == 1;
      } catch (e) {
        return false;
      }
    })());
</script>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://yanni4night.github.io/2014/09/06/2014-09-06-hasownproperty-in/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Yanni4night">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/09/06/2014-09-06-hasownproperty-in/" class="post-title-link" itemprop="url">hasOwnProperty与in</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-09-06 00:00:00" itemprop="dateCreated datePublished" datetime="2014-09-06T00:00:00+08:00">2014-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-11 18:44:30" itemprop="dateModified" datetime="2022-04-11T18:44:30+08:00">2022-04-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/js/" itemprop="url" rel="index"><span itemprop="name">js</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/09/06/2014-09-06-hasownproperty-in/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/09/06/2014-09-06-hasownproperty-in/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>hasOwnProperty</code> 与 <code>in</code> 都可以用来判断一个对象的成员是否存在，但有很大的区别，前者不会搜索对象的原型链中的成员，但后者会；前者是 Object 原型中的函数，后者是 Javascript 操作符等。关于第一中区别，可以通过阅读 <a target="_blank" rel="noopener" href="http://www.ecma-international.org/publications/standards/Ecma-262.htm">ECMAScript</a> 规范来了解其细节。</p>
<h6 id="hasOwnProperty-NaN"><a href="#hasOwnProperty-NaN" class="headerlink" title="hasOwnProperty"></a>hasOwnProperty</h6><p>[ECMA-262 3rd edition](<a target="_blank" rel="noopener" href="http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262">http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262</a> %203rd%20edition %20December%201999.pdf) 对 <code>hasOwnProperty</code> 的描述非常简单：“返回对象（不包括原型链）中是否有该成员”。该版本针对对象成员定义了四个属性：<code>ReadOnly</code>、<code>DontEnum</code>、<code>DontDelete</code>、<code>Internal</code>。</p>
<p><a target="_blank" rel="noopener" href="http://ecma-international.org/ecma-262/5.1/">ECMA-262 5.1rd edition</a> 重新定义了成员属性，提供了更灵活的访问权限。在该版本中，<a target="_blank" rel="noopener" href="http://ecma-international.org/ecma-262/5.1/#sec-8.6.1">对象成员</a>分为“数据成员(Data Property)”和“存取成员(Accessor Property)”两种。前者包含属性：<code>Value</code>、<code>Writable</code>、<code>Enumerable</code>、<code>Configurable</code>，后者包含<code>Get</code>、<code>Set</code>、<code>Enumerable</code>、<code>Configurable</code>。对于不同的成员定义方式，其类型自然也不同。</p>
<pre><code>var o = &#123;
    a:1 //Data Property
    set b()&#123;&#125; //Accessor Property
    get c()&#123;&#125; //Accessor Property
&#125;;
o.d = 1;//Data Property
o.__defineSetter(&#39;m&#39;  function(m)&#123;&#125;);//Accessor Property
o.__defineGetter(&#39;n&#39;  function(n)&#123;&#125;);//Accessor Property
Object.defineProperty(o &#39;e&#39; &#123;&#125;);//Data Property
Object.defineProperty(o &#39;e&#39; &#123;set:function()&#123;&#125;&#125;);//Accessor Property
Object.create(null &#123;f:&#123;&#125;&#125;);//Data Property
Object.create(null &#123;f:&#123;set:function()&#123;&#125;&#125;&#125;);//Accessor Property
</code></pre>
<p>需要注意的是不能同时定义“value”与“set&#x2F;get”。</p>
<p>ES5 中的 <code>hasOwnProperty</code> 需要访问一个内部方法：<code>GetOwnProperty</code>，该方法返回一个新的<a target="_blank" rel="noopener" href="http://ecma-international.org/ecma-262/5.1/#sec-8.10">属性描述符(Property Descriptor )</a>，或者是“数据成员”或者是“存取成员”。对于字符串来说，它有一个自己的 <a target="_blank" rel="noopener" href="http://ecma-international.org/ecma-262/5.1/#sec-15.5.5.2">GetOwnProperty</a>方法，允许以数字作为 property name，代表在指定位置上是否存在字符，该值不超过字符串长度减一。该方法仅返回“数据成员”格式，因为字符串是不可变的。</p>
<h6 id="in"><a href="#in" class="headerlink" title="in"></a>in</h6><p><code>in</code> 操作符只能用于对象而非简单类型，它调用内部方法 <code>HasProperty</code>，该方法递归搜索原型链，直到找到对应的成员。在 ES5 中，该方法还涉及另一个内部方法：<code>GetOwnProperty</code>。因此对于字符串，下面的表达式返回真：</p>
<pre><code>2 in new String(&#39;abc&#39;)
</code></pre>
<h6 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h6><p>判断一个对象 O 是否携带有成员 P，一般可以：</p>
<pre><code>undefined === O.P
</code></pre>
<p>但对于值为 <code>undefined</code> 的成员无效，这时就需要使用 <code>in</code> 操作符：<br>​<br>    var Class &#x3D; function(){this.P &#x3D; undefined;};<br>    Class.prototype &#x3D; {Q:undefined;};<br>    var O &#x3D; new Class();</p>
<pre><code>!!O.P;//false
!!O.Q;//false
&#39;P&#39; in O;//true
&#39;Q&#39; in O;//true
O.hasOwnProperty(&#39;P&#39;);//true
O.hasOwnProperty(&#39;Q&#39;);//false
</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://yanni4night.github.io/2014/08/29/2014-08-29-principle-==/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Yanni4night">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/08/29/2014-08-29-principle-==/" class="post-title-link" itemprop="url">Javascript '==' 运算符原理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-08-29 00:00:00" itemprop="dateCreated datePublished" datetime="2014-08-29T00:00:00+08:00">2014-08-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-11 18:44:30" itemprop="dateModified" datetime="2022-04-11T18:44:30+08:00">2022-04-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/js/" itemprop="url" rel="index"><span itemprop="name">js</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/08/29/2014-08-29-principle-==/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/08/29/2014-08-29-principle-==/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>JavaScript 中的<code>==</code>运算符用以比较两侧的值是否“近似”相等，区别于<code>===</code>的严格相等。</p>
<p><code>==</code>可以达到以下效果：</p>
<pre><code>null==undefined //true
[]==false //true
[]==&#39;&#39; //true
[1]==&#39;1&#39; //true
</code></pre>
<p>要说明 JavaScript 引擎在计算 <code>==</code> 运算符时做了什么，先要了解几个内部概念和方法。</p>
<h5 id="Type"><a href="#Type" class="headerlink" title="Type"></a>Type</h5><p>ECMAScript 规范规定了六种变量类型：null undefined string number boolean object。<code>Type</code> 不同于运算符 <code>typeof</code> ，它可以分辨出 null 和 object，但不能分辨 function 和 object，当然事实上并没有 function 这样一种类型。</p>
<p>可以这样模拟 <code>Type</code> 的行为：</p>
<pre><code>function Type(e) &#123;
    if (undefined === e) &#123;
        return &#39;undefined&#39;;
    &#125; else if (null === e) &#123;
        return &#39;null&#39;;
    &#125; else if (&#39;number&#39; === typeof e) &#123;
        return &#39;number&#39;;
    &#125; else if (&#39;string&#39; === typeof e) &#123;
        return &#39;string&#39;;
    &#125; else if (&#39;boolean&#39; === typeof e) &#123;
        return &#39;boolean&#39;;
    &#125; else return &#39;object&#39;;
&#125;
</code></pre>
<h5 id="0的符号"><a href="#0的符号" class="headerlink" title="0的符号"></a>0的符号</h5><p>另外需要说明的是0本身包括两个值，正零：+0，和负零：-0。一般不会对这两个值进行区分，甚至使用 <code>===</code> 运算符也分辨不出：</p>
<pre><code>+0===-0 //true
</code></pre>
<p>在ECMAScript中有内部内部方法可以区别出这两个值，当然我们也可以做到这一点：</p>
<pre><code>function isPositiveZero(e) &#123;
    return 0 === e &amp;&amp; 1 / e &gt; 0;
&#125;

function isNegativeZero(e) &#123;
    return 0 === e &amp;&amp; 1 / e &lt; 0;
&#125;
</code></pre>
<p>关于这两点将会在后面的侦断中用到。</p>
<h5 id="ToNumber"><a href="#ToNumber" class="headerlink" title="ToNumber"></a>ToNumber</h5><p>转换为数字，规则如下：</p>
<table>
<thead>
<tr>
<th align="center">输入类型</th>
<th align="center">结果</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Undefined</td>
<td align="center">NaN</td>
</tr>
<tr>
<td align="center">Null</td>
<td align="center">+0</td>
</tr>
<tr>
<td align="center">Boolean</td>
<td align="center">真返回1，假返回+0</td>
</tr>
<tr>
<td align="center">Number</td>
<td align="center">直接返回</td>
</tr>
<tr>
<td align="center">String</td>
<td align="center">字面意义</td>
</tr>
<tr>
<td align="center">Object</td>
<td align="center">调用ToNumber(toPrimitive)，hint：Number</td>
</tr>
</tbody></table>
<h5 id="toPrimitive"><a href="#toPrimitive" class="headerlink" title="toPrimitive"></a>toPrimitive</h5><p>该内部方法将一个对象转换为原始类型，在上面提到的六种类型中，前五种都属于原始类型。对于非原始类型，将根据一个成为 <code>hint</code> 的值访问该对象的 <code>Default Value</code> 属性来获取原始值。<code>hint</code> 取值只能为 “string” 和 “number”（默认）。如果为 “string”，将依次调用对象的 <code>toString</code> 和 <code>valueOf</code> 来获取原始值，如果为 “number”，将依次调用 <code>valueOf</code> 和 <code>toString</code> 方法，可见顺序依赖于 <code>hint</code> 值。</p>
<h4 id=""><a href="#" class="headerlink" title="=="></a><code>==</code></h4><p><code>==</code> 操作x，y两个值时要经过一系列的类型和值的侦断，在 ECMAScript 内部称之为 <code>The Abstract Equality Comparison Algorithm</code>：</p>
<ol>
<li>如果 Type(x) 不同于 Type(y)  执行第 14 步。</li>
<li>如果 Type(x) 为 Undefined  返回真。</li>
<li>如果 Type(x) 为 Null  返回真。</li>
<li>如果 Type(x) 不是 Number  执行第 11 步。</li>
<li>如果 x 为 NaN  返回假。</li>
<li>如果 y 为 NaN  返回假。</li>
<li>如果 x 与 y 有相同的值  返回真。</li>
<li>如果 x 为 +0 并且 y 为 −0  返回真。</li>
<li>如果 x 为 −0 并且 y 为 +0  返回真。</li>
<li>返回假。</li>
<li>如果 Type(x) 为 String  那么如果 x 和 y 具有相同的字符序列（等长并且对应位置字符相同）返回真，否则，返回假。</li>
<li>如果 Type(x) 为 Boolean  如果 x 和 y 都是真或者都是假则返回真，否则 返回假。</li>
<li>如果x和y引用相同的对象返回真，否则  返回假。</li>
<li>如果 x 为 null 并且 y 为 undefined  返回真。</li>
<li>如果 x 为 undefined 并且 y 为 null  返回真。</li>
<li>如果 Type(x) 为 Number 并且 Type(y) 为 String 返回 x &#x3D;&#x3D; ToNumber(y) 的结果。</li>
<li>如果 Type(x) 为 String 并且 Type(y) 为 Number 返回 ToNumber(x) &#x3D;&#x3D; y 的结果。</li>
<li>如果 Type(x) 为 Boolean  返回 ToNumber(x) &#x3D;&#x3D; y 的结果。</li>
<li>如果 Type(y) 为 Boolean  返回 x &#x3D;&#x3D; ToNumber(y) 的结果。</li>
<li>如果 Type(x) 为 String 或者 Number 并且 Type(y) 为 Object 返回 x &#x3D;&#x3D; ToPrimitive(y) 的结果。</li>
<li>如果 Type(x) 为 Object 并且 Type(y) 为 String 或者 Number 返回 ToPrimitive(x) &#x3D;&#x3D; y 的结果。</li>
<li>返回假。</li>
</ol>
<p>有了这个流程，就可以知道上面提到的几个式子成立的原理：</p>
<pre><code>[]==false
</code></pre>
<p>任意数组转换为布尔值时都为真，但与布尔值进行<code>==</code> 运算操作时，首先会将布尔转换为数字，即 false&#x3D;&gt;0，接着再与数组进行 <code>==</code> 运算。这时，需要进行 <code>toPrimitive([] Number)</code> 运算了，返回0，所以式子返回真。</p>
<pre><code>[1]==&#39;1&#39;
</code></pre>
<p>数组与字符串比较，直接转换为 <code>toPrimitive([1] String) == &#39;1&#39;</code>，显然为真。</p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><p>在使用 <code>==</code> 进行操作之前，一定要明确两边值类型所带来的结果差异，必要时，直接强转为布尔值进行计算。</p>
<h5 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h5><p><a href="/example/==.html">该页面</a>展示了比较两个不同类型值得过程中所发生的事情。</p>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><ul>
<li><a target="_blank" rel="noopener" href="http://www.adequatelygood.com/Object-to-Primitive-Conversions-in-JavaScript.html">http://www.adequatelygood.com/Object-to-Primitive-Conversions-in-JavaScript.html</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://yanni4night.github.io/2014/08/15/2014-08-15-node-semver/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Yanni4night">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/08/15/2014-08-15-node-semver/" class="post-title-link" itemprop="url">NODE 语义化版本解析</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-08-15 00:00:00" itemprop="dateCreated datePublished" datetime="2014-08-15T00:00:00+08:00">2014-08-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-11 18:44:30" itemprop="dateModified" datetime="2022-04-11T18:44:30+08:00">2022-04-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/npm-node-semser-%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC/" itemprop="url" rel="index"><span itemprop="name">npm node semser 语义化版本</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/08/15/2014-08-15-node-semver/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/08/15/2014-08-15-node-semver/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>Node Packaged Modules</code>(NPM) 中使用的版本号系统遵循<a target="_blank" rel="noopener" href="http://semver.org/lang/zh-CN">语义化版本2.0.0</a>：</p>
<p>版本格式：主版本号.次版本号.修订号，版本号递增规则如下：</p>
<ol>
<li>主版本号：当你做了不兼容的API 修改，</li>
<li>次版本号：当你做了向下兼容的功能性新增，</li>
<li>修订号：当你做了向下兼容的问题修正。</li>
</ol>
<p>NPM中所依赖的其它模块可以指定为特定的版本，也可以指定一个版本号范围，为此 <code>Node-semver</code> 引擎提供了一套灵活的语法：</p>
<h5 id=""><a href="#" class="headerlink" title="&gt;"></a>&gt;</h5><p>大于某版本，如 “&gt;0.1.2”</p>
<h5 id="-1"><a href="#-1" class="headerlink" title="&lt;"></a>&lt;</h5><p>小于某版本，如 “&lt;0.2.1”</p>
<h5 id="-2"><a href="#-2" class="headerlink" title="&gt;&#x3D;"></a>&gt;&#x3D;</h5><p>大于等于某版本，如 “&gt;&#x3D;0.1.2”</p>
<h5 id="-3"><a href="#-3" class="headerlink" title="&lt;&#x3D;"></a>&lt;&#x3D;</h5><p>小于等于某版本，如 “&gt;&#x3D;0.1.2”</p>
<h5 id="-4"><a href="#-4" class="headerlink" title="-"></a>-</h5><p>两个版本范围之内，包含边界，如 “0.1.2 - 0.1.9”，相当于 “&gt;&#x3D;0.1.2” and “&lt;&#x3D;0.1.9”</p>
<h5 id="-5"><a href="#-5" class="headerlink" title="^"></a>^</h5><p>当前版本至下一个主版本，如 “^1.1.2”，相当于 “&gt;&#x3D;1.1.2” and “&lt;2.0.0”</p>
<h5 id="-6"><a href="#-6" class="headerlink" title="~"></a>~</h5><p>当前版本至下一个次版本，如 “~1.1.2”，相当于 “&gt;&#x3D;1.1.2” and “&lt;1.2.0”</p>
<p>另外，<code>*</code> <code>x</code>和空代表任意，下面几个的含义相同：<br>“1.2.x”，”1.2.*”，”1.2”</p>
<p>选用合适的版本范围选择符，避免依赖模块的小版本升级导致的连锁强迫升级。</p>
<h6 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h6><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/npm/node-semver">https://github.com/npm/node-semver</a></li>
<li><a target="_blank" rel="noopener" href="http://semver.org/lang/zh-CN/">http://semver.org/lang/zh-CN/</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://yanni4night.github.io/2014/05/03/2014-05-03-css3-multicol/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Yanni4night">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/05/03/2014-05-03-css3-multicol/" class="post-title-link" itemprop="url">CSS3多列布局</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-05-03 00:00:00" itemprop="dateCreated datePublished" datetime="2014-05-03T00:00:00+08:00">2014-05-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-11 18:44:30" itemprop="dateModified" datetime="2022-04-11T18:44:30+08:00">2022-04-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/css3-column-layout/" itemprop="url" rel="index"><span itemprop="name">css3 column layout</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/05/03/2014-05-03-css3-multicol/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/05/03/2014-05-03-css3-multicol/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>过宽的大段文字内容对读者不够友好，尝试阅读一下<a href="/example/columns.html">这里</a>的第一段文字，是否在换行时遇到困难。</p>
<p>像报纸一样，web 设计时遇到大段文字一般都会尝试将文字内容分成多列显示，在技术上可以通过加入表格(table)或任意其它块级元素标签解决。显然这样的设计欠缺灵活性，需要手动分割文字内容，过多或过少的文字都将影响分割算法。<code>CSS 2.1</code> 后带来了新的布局功能————多列布局，很好地解决了此问题。</p>
<p>#####语法</p>
<h6 id="多列布局"><a href="#多列布局" class="headerlink" title="多列布局"></a>多列布局</h6><p>多列布局适用于非替换 <code>block</code> 元素（除 <code>table</code> 外），<code>table-cell</code> 和 <code>inline-block</code> 元素。</p>
<pre><code>article&#123;
    columns:3;
&#125;
</code></pre>
<p>这段 CSS 代码即定义所有 <code>article</code> 元素分为3列进行排版。这是最大列数定义，当文字不足时，也可能按2列或1列显示。</p>
<p>也可以这样定义：</p>
<pre><code>article&#123;
    columns:10em;
&#125;
</code></pre>
<p>这意味着每列最多显示10个字符宽度。</p>
<p>事实上，<code>columns</code> 是 <code>column-count</code> 和 <code>column-width</code> 的缩写。大多数时候仅需给出一个值，当两个值都给出时，一般仅有一个能影响最终排版，<code>column-count</code> 代表可以分割的最大列数。</p>
<p>######列间隙</p>
<p>使用 <code>column-gap</code> 设置列与列之间的间隙，如：</p>
<pre><code>article&#123;
    column-gap:3em;
&#125;
</code></pre>
<p>######列分割线</p>
<p>列分割线由 <code>column-rule-color</code> ， <code>column-rule-width</code> 和 <code>column-rule-style</code> 定义，语法类似与 <code>border</code> ，如：</p>
<pre><code>article&#123;
    column-rule-color:#28b;
    column-rule-style:dashed;
    column-rule-width:1px;
&#125;
</code></pre>
<p>或者简写为：</p>
<pre><code>article&#123;
    column-rule:1px #28b dashed;
&#125;
</code></pre>
<p>######分割位置</p>
<p>可以定义一些分割位置的建议，如不能在某些元素的中间分割：</p>
<pre><code>article p&#123;
    break-before:avoid;
    break-after:column;
    break-inside:avoid;
&#125;
</code></pre>
<p>这些属性仅对块级元素有效，不过好像目前还没有浏览器支持它们。</p>
<p>######夸列元素</p>
<p>可以定义夸列元素，如：</p>
<pre><code>article h1&#123;
    column-span:all|none;
&#125;
</code></pre>
<p>######列填充策略</p>
<p>两种策略：平衡和非平衡的，目前只有 <code>Firefox</code> 支持:</p>
<pre><code>article&#123;
    column-fill:balance|auto;
&#125;
</code></pre>
<p>#####浏览器支持</p>
<p>虽然多列布局一直处于 <a target="_blank" rel="noopener" href="http://www.w3.org/TR/css3-multicol/">Candidate Recommendation</a> 阶段，但是现代 PC 和 Mobile 浏览器几乎已经全部实现， <code>IE</code> 从 10 开始支持。部分浏览器需要加厂商前缀。</p>
<ul>
<li>IE 10+</li>
<li>Firefox 5+</li>
<li>Chrome 12+</li>
<li>Safari 3.2+</li>
<li>Opera 11.1+</li>
<li>Android 2.1+</li>
<li>iOS 3.2+</li>
</ul>
<p>下面是多列布局所需的所有 CSS 属性的  <code>LESS</code> ：</p>
<pre><code>.column(@w)&#123;
    -webkit-columns:@w;
    -moz-columns:@w;
    columns:@w;
&#125;
.column-gap(@len)&#123;
    -webkit-column-gap:@len;
    -moz-column-gap:@len;
    column-gap:@len;
&#125;
.column-rule-color(@color)&#123;
    -webkit-column-rule-color:@color;
    -moz-column-rule-color:@color;
    column-rule-color:@color;
&#125;
.column-rule-style(@style:solid)&#123;
    -webkit-column-rule-style:@style;
    -moz-column-rule-style:@style;
    column-rule-style:@style;
&#125;
.column-rule-width(@width)&#123;
    -webkit-column-rule-width:@width;
    -moz-column-rule-width:@width;
    column-rule-width:@width;
&#125;
.break-before(@break)&#123;
    -webkit-break-before:@break;
    -moz-break-before:@break;
    break-before:@break;
&#125;
.break-after(@break)&#123;
    -webkit-break-after:@break;
    -moz-break-after:@break;
    break-after:@break;
&#125;
.break-inside(@break)&#123;
    -webkit-break-inside:@break;
    -moz-break-inside:@break;
    break-inside:@break;
&#125;
.column-span(@span)&#123;
    -webkit-column-span:@span;
    -moz-column-span:@span;
    column-span:@span;
&#125;
.column-fill(@fill:balance)&#123;
    -webkit-column-fill:@fill;
    -moz-column-fill:@fill;
    column-fill:@fill;
&#125;
</code></pre>
<p>查看多列布局的实际效果，点击<a href="/example/columns.html">这里</a>。</p>
<p>#####总结</p>
<p>使用 CSS 多列布局不仅大大提高了布局灵活性，对屏幕阅读器、打印机和 <code>SEO</code> 也更友好。但需要针对旧浏览器设计功能降级。</p>
<p>#####参考</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Using_multi-column_layouts">https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Using_multi-column_layouts</a></li>
<li><a target="_blank" rel="noopener" href="http://css-tricks.com/snippets/css/multiple-columns/">http://css-tricks.com/snippets/css/multiple-columns/</a></li>
<li><a target="_blank" rel="noopener" href="http://webdesign.tutsplus.com/articles/an-introduction-to-the-css3-multiple-column-layout-module--webdesign-4934">http://webdesign.tutsplus.com/articles/an-introduction-to-the-css3-multiple-column-layout-module--webdesign-4934</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://yanni4night.github.io/2014/05/02/2014-05-02-ie11-as-not-ie/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Yanni4night">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/05/02/2014-05-02-ie11-as-not-ie/" class="post-title-link" itemprop="url">不是IE的IE11</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-05-02 00:00:00" itemprop="dateCreated datePublished" datetime="2014-05-02T00:00:00+08:00">2014-05-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-11 18:44:30" itemprop="dateModified" datetime="2022-04-11T18:44:30+08:00">2022-04-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/other/" itemprop="url" rel="index"><span itemprop="name">other</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/05/02/2014-05-02-ie11-as-not-ie/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/05/02/2014-05-02-ie11-as-not-ie/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>Internet Explorer 11</code>(IE11) 自去年六月份发布以来虽然据说也取得了不错的成绩，但在中国好像还看不到其占有率。获取 IE11 可以从两种方式：安装 <code>Win8</code>，自带 IE11；从 <code>Win7</code> 的 IE9&#x2F;10 升级，但 <code>XP</code> 在中国仍然有超过<a target="_blank" rel="noopener" href="http://tongji.baidu.com/data/browser">60%</a>的占有率，而 <code>XP</code> 最高也只能升级到 <code>IE8</code>。</p>
<p>前端测试仍在徘徊在 IE6 ~ IE10 之间，但在开发过程中偶然间发现了 IE11 与众 IE 不同之处。</p>
<p>前端开发一直将浏览器分为 W3C 和 IE 两种，特别是将 IE 众版本当做异类对待。微软这次决定洗心革面，将 IE11 打造成一款不是 ‘IE’ 的浏览器，拥有与其它 ‘W3C’ 浏览器一样的特性。</p>
<h6 id="重要变动"><a href="#重要变动" class="headerlink" title="重要变动"></a>重要变动</h6><p>IE11 支持了完整的 <code>flex</code> 能力（参见<a href="/blog/flexbox-layout.html">利用flexbox构建可伸缩布局</a>），于 Firefox 之后第二个拥有无前缀 CSS 属性名。</p>
<p>支持了 <a href="www.chromium.org/spdy%E2%80%8E">SPDY</a> 协议。</p>
<p><code>ActiveXObject</code> 对象不再存在了，这使得许多依靠检测该对象来嗅探浏览器类型的代码失效。</p>
<p>同样，<code>document.all</code> 的布尔值也会返回 false 。许多浏览器拥有该对象但是在转成布尔值时故意返回 false 用以兼容之前无数使用该对象判断浏览器类型的代码。现在，只有 IE6~9 会返回 true。</p>
<p>UA中一直存在的 <code>MSIE</code> 被删除，依赖于此获取浏览器类型和版本号的代码将失效。要判断其类型和版本，必须 <code>MSIE</code> 和 <code>Trident</code> 共用了。</p>
<p>移除了 <code>attachEvent</code> ，以 <code>addEventListener</code> 取代之，这也会破坏使用该方法判断浏览器类型的代码。</p>
<p>IE8 引入的 <a target="_blank" rel="noopener" href="http://msdn.microsoft.com/en-us/library/ie/cc288060.aspx">XDomainRequest</a> 被删除，取而代之的是支持跨域资源共享（<a target="_blank" rel="noopener" href="http://www.w3.org/TR/cors/">CORS</a>）的 <code>XMLHttpRequest</code>。</p>
<h6 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h6><p>显然 IE11 的改进破坏了几乎所有用于区分 <code>W3C</code> 和 <code>IE</code> 浏览器的方法，使得无数现存代码无法取得其是 IE 浏览器的事实。或许这就是微软的目的：IE11 不再是 ‘IE’ 了，你不需要在判断出来它了。</p>
<p>下面给出使用 UA 获取 IE 版本的代码：<br>​<br>    &#x2F;**<br>     * Get version if it’s a microsoft internet explorer.<br>     *<br>     * @return version code or else null if it’s not a IE.<br>     *&#x2F;<br>    function getIEVersion(){<br>        var ua &#x3D; navigator.userAgent matches tridentMap&#x3D;{‘4’:8 ‘5’:9 ‘6’:10 ‘7’:11};</p>
<pre><code>    matches = ua.match(/MSIE (\d+)/i);

    if(matches&amp;&amp;matches[1])
    &#123;   
        //find by msie
        return +matches[1];
    &#125;

    matches = ua.match(/Trident\/(\d+)/i);
    if(matches&amp;&amp;matches[1])
    &#123;   
        //find by trident
        return tridentMap[matches[1]]||null;
    &#125;
    
    //we did what we could
    return null;
&#125;
</code></pre>
<p> 由于 UA 可以随意伪造，所以并没有合适的方法能够保证检测出真正的浏览器环境，因此代码都不应依赖于具体的环境和版本。</p>
<h6 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h6><ul>
<li><a target="_blank" rel="noopener" href="http://msdn.microsoft.com/en-us/library/ie/bg182625(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/ie/bg182625(v=vs.85).aspx</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://yanni4night.github.io/2014/05/01/2014-05-01-flexbox-layout/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Yanni4night">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/05/01/2014-05-01-flexbox-layout/" class="post-title-link" itemprop="url">利用flexbox构建可伸缩布局</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-05-01 00:00:00" itemprop="dateCreated datePublished" datetime="2014-05-01T00:00:00+08:00">2014-05-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-11 18:44:30" itemprop="dateModified" datetime="2022-04-11T18:44:30+08:00">2022-04-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/flex-box-%E5%8F%AF%E4%BC%B8%E7%BC%A9-%E5%B8%83%E5%B1%80/" itemprop="url" rel="index"><span itemprop="name">flex box 可伸缩 布局</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/05/01/2014-05-01-flexbox-layout/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/05/01/2014-05-01-flexbox-layout/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h6 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h6><p>可伸缩布局技术产生已久，但对其利用非常地少，至今只能在一些移动站点上隐约看到它的身影。这不仅仅因为其只能针对较新的浏览器，而且其 API 也较为复杂。</p>
<p>现今的针对多屏设备的站点依然强依赖于<a target="_blank" rel="noopener" href="http://www.w3.org/TR/css3-mediaqueries/">媒体查询</a>。其后果是会产生大量冗余的 CSS 代码与<code>百分比</code>宽高定义，增加维护难度。相比之下，可伸缩布局技术提供了一次编写代码适配多种屏幕尺寸的能力。</p>
<p>例如，我们想要构建一个下面这样的横排布局：</p>
<pre><code>|-----|-----|----------|
|  1  |  1  |     2    |
|-----|-----|----------|
</code></pre>
<p>HTML 代码为：</p>
<pre><code>&lt;div class=&quot;wrapper&quot;&gt;
    &lt;div class=&quot;item&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;item&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;item&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>要求在不同的屏幕宽度下依旧保持这种比例关系：1:1:2。我们可能会这样编写css代码：</p>
<pre><code>.wrapper&#123;width:100%;&#125;
.item&#123;float:left;width:25%;&#125;
.item:last-child&#123;width:50%;&#125;
</code></pre>
<p>各个 <code>item</code> 子元素的宽度比例需要小心的维护，如果需要新增加一个元素，比例值需要重新计算，你肯定不想遇到一个不能整除的除法计算，比如100&#x2F;6。</p>
<p>上面的例子中，各个子元素的宽度和等于父元素，如果期望之间存在差值怎么办，比如每个子元素存在一个固定的 1px 右边距，那么宽度该如何定义？</p>
<p>使用 <code>calc</code> 是一个方法：</p>
<pre><code>.wrapper&#123;width:100%;&#125;
.item&#123;float:left;width:calc(25% - 1px);margin-right:1px;&#125;
.item:last-child&#123;width:50%;&#125;
</code></pre>
<p>只可惜这种方式依然需要清醒地人工计算，何况 <code>calc</code> 本身支持并不好。</p>
<p>使用 <code>::after</code> 也是一种方法，不过显然会带来更多问题。</p>
<p>可伸缩布局（flex）提供了相当简单地分配剩余空间的方法，并且书写很傻瓜————你不需要关心最终是如何计算的，总之它能很清晰地实现你想要的比例布局：</p>
<pre><code>.wrapper&#123;width:100%;display:flex;&#125;
.item&#123;flex:1;margin-right:1px;&#125;
.item:last-child&#123;flex:2;margin-right:0;&#125;
</code></pre>
<p>对，你只需要告诉浏览器你想要的比例，多出来的 <code>margin</code>，<code>padding</code>，<code>border</code>都不必额外考虑。</p>
<h6 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h6><p><code>flex</code> 作用于内外两级元素，外层称之为“容器”，内层称之为“元素”。需要将容器设置：</p>
<pre><code>display:flex;/*块级元素*/
/*或*/
display:inline-flex;/*内联元素*/
</code></pre>
<p>与之前的 <code>display:inline</code> 和 <code>display:block</code> 没什么分别。经过这样的设置，其直接子元素即刻拥有可伸缩能力。要定义子元素的占比，设置：</p>
<pre><code>flex:1;
/*或*/
flex:2;
</code></pre>
<p>系统会根据各个元素的占比自动计算其真实尺寸。值得一提的是，拥有 <code>flex</code> 设置的元素仅均分剩余空间的大小————固定尺寸的子元素不受影响。以上面的 HTML 结构为例，书写 CSS：</p>
<pre><code>.wrapper&#123;width:200px;display:flex;&#125;
.item:first-child&#123;width:50px;&#125;
.item:nth-child(1)&#123;flex&#125;
.item:last-child&#123;flex:2;&#125;
</code></pre>
<p>那么产生的布局是：</p>
<pre><code>|-----|-----|----------|
| 50px| 50px|  100px   |
|-----|-----|----------|
</code></pre>
<p>其中第一个元素固定为 50px，第二个元素占剩余的 1&#x2F;3，即(200-50)&#x2F;3&#x3D;50px，最后一个元素占2&#x2F;3，即 100px。</p>
<p><code>flex</code> 拥有<code>主轴</code>和<code>侧轴</code>的概念，可以简单地理解为 XY 坐标系。默认横向为 X 轴，纵向为 Y 轴。可以通过 <code>flex-direction</code> 作用于容器来改变设置。在主轴上子元素的对齐由 <code>justify-content</code> 控制，侧轴子元素对齐由 <code>align-items</code> 控制，同时还可以控制元素显示顺序的 <code>order</code>，相关具体意义及备选值可查看 <a target="_blank" rel="noopener" href="http://www.w3.org/TR/css-flexbox-1/">W3C 草案</a>。</p>
<p><img src="/images/flex/flexbox.png" alt="flex"></p>
<p>很不幸，<code>flex</code> 语法目前仍然处于<a target="_blank" rel="noopener" href="http://www.w3.org/TR/css-flexbox-1/">草案</a>阶段，并且经历了一次 <code>box</code> 旧语法的废弃————上面例子中的语法是最新的写法，从2009年开始各浏览器厂商陆续实现了一种现在被废弃的 <code>box</code> 语法，我们称之为老语法。更糟糕的是，微软的 IE10（包括桌面端和移动端）浏览器实现了一种介于新语法和旧语法之间的<code>中间语法</code>。下面的表格列举了这三种语法的API：</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">含义</th>
<th align="center">新语法（-webkit- -moz-）</th>
<th align="center">老语法（-webkit- -moz-）</th>
<th align="center">IE10语法</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">弹性容器定义</td>
<td align="center">display : flex&#x2F;inline-flex</td>
<td align="center">display : box&#x2F;inline-box</td>
<td align="center">display : -ms-flexbox</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">子元素排列方式</td>
<td align="center">flex-direction : row&#x2F; column-row&#x2F;column&#x2F;column-reverse</td>
<td align="center">box-orient : horizontal&#x2F;vertical&#x2F;inline-axis&#x2F;block-axis&#x2F;inherit</td>
<td align="center">-ms-flex-direction : row&#x2F;column&#x2F;row-reverse&#x2F;column-reverse&#x2F;inherit</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">主轴子元素对齐</td>
<td align="center">justify-content : flex-start&#x2F; flex-end&#x2F;center&#x2F;space-around&#x2F;space-between</td>
<td align="center">box-pack : start&#x2F;end&#x2F;center&#x2F;justify</td>
<td align="center">-ms-flex-pack : start&#x2F;end&#x2F;center&#x2F;justify</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">侧轴子元素分布</td>
<td align="center">align-content : flex-start&#x2F; flex-end&#x2F;center&#x2F;space- around&#x2F;space-between</td>
<td align="center">NOT SUPPORTED</td>
<td align="center">-ms-flex-line-pack: start&#x2F;end&#x2F;center&#x2F;justify&#x2F;distribute&#x2F;stretch</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">侧轴方向子元素对齐</td>
<td align="center">align-items : flex-start&#x2F;flex-end&#x2F;center&#x2F;stretch</td>
<td align="center">box-align : start&#x2F;end &#x2F;center&#x2F;baseline&#x2F;stretch</td>
<td align="center">-ms-flex-align : start&#x2F;end&#x2F;center&#x2F;baseline&#x2F;stretch</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">弹性子元素伸缩值</td>
<td align="center">flex : [positive-flex] [negative-flex] [preferred-size]</td>
<td align="center">box-flex : [positive-flex]</td>
<td align="center">-ms-flex : [positive-flex] [negative-flex] [preferred-size]</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">子元素排列顺序</td>
<td align="center">order : 1</td>
<td align="center">box-ordinal-group : 1 (positive)</td>
<td align="center">-ms-flex-order : 1</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">在子元素中覆盖父元素定义的第5项</td>
<td align="center">align-self : flex-start&#x2F;flex- end&#x2F;center&#x2F;stretch</td>
<td align="center">NOT SUPPORTED</td>
<td align="center">-ms-flex-item-align : auto&#x2F;start&#x2F;end&#x2F;center&#x2F;baseline&#x2F;stretch</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">换行</td>
<td align="center">flex-wrap : wrap&#x2F;no-wrap&#x2F;wrap-reverse</td>
<td align="center">NOT SUPPORTED</td>
<td align="center">-ms-flex-wrap : none&#x2F;wrap&#x2F;wrap-reverse</td>
</tr>
</tbody></table>
<p>需要指出的是新语法支持多行模式，老语法并不支持。</p>
<h6 id="浏览器支持"><a href="#浏览器支持" class="headerlink" title="浏览器支持"></a>浏览器支持</h6><p>Chrome，Safari，Opera，Firefox，IE10+，Android对可伸缩布局进行了支持，其中一些版本仅支持老语法，而另一些同时支持两种语法，查看<a target="_blank" rel="noopener" href="http://caniuse.com/#feat=flexbox">这里</a>。</p>
<p>因此似乎针对 iOS ， Android 和 Windows Phone 8 移动设备开发的网站更适合应用 <code>flex</code> 技术，因为这些平台的浏览器都支持其中至少一种语法。针对 PC 你需要一种优雅的降级。</p>
<p>我做了一些针对不同语法的测试，在<a href="/example/flex.html">这里</a>。</p>
<p>总结有几点需要注意：</p>
<ul>
<li>针对 <a target="_blank" rel="noopener" href="http://www.webkit.org/">webkit</a> 编程，需要兼容老语法，目前大多数使用 <a target="_blank" rel="noopener" href="http://www.webkit.org/">webkit</a> 的浏览器都还不支持新的语法；</li>
<li>仅在横向方向上应用 <code>flex</code>，垂直放向上可以看见老语法在分配高度比例时存在问题；</li>
<li>如果子元素的内容区大小不同时，老语法会引起子元素的不均匀分配，即使子元素能够容纳其内容，这个时候，只要为每个子元素设定 <code>width:100%</code>即可，新语法和IE10在这方面没有问题，即使子元素的内容区溢出。opera(presto)在这个问题上处于中间状态，即内容区不溢出，子元素按照预订比例分配，如果溢出，子元素将会被撑大；</li>
</ul>
<h6 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h6><p><code>flex</code> 在针对现在浏览器编程的环境中是一个很方便的工具，IE11 和 Firefox 现在已经实现了无前缀的语法，相信 <a target="_blank" rel="noopener" href="http://www.webkit.org/">webkit</a> 也会很快完成转换，届时新语法就会成熟，但老版本的 webkit 仍在存在很大的市场，因此在书写可伸缩 CSS 代码时仍然要兼容老语法，这会限制 <code>flex</code> 的应用。相对于普通的百分比计算方法，老语法提供的功能仍然足够日常使用。</p>
<p>另外，可以使用 <a target="_blank" rel="noopener" href="https://github.com/postcss/autoprefixer">autoprefixer</a> 来自动屏蔽这三个版本之间的差异。</p>
<h6 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h6><ul>
<li><a target="_blank" rel="noopener" href="http://dev.oupeng.com/articles/flexbox-basics">http://dev.oupeng.com/articles/flexbox-basics</a></li>
<li><a target="_blank" rel="noopener" href="http://css-tricks.com/snippets/css/a-guide-to-flexbox/">http://css-tricks.com/snippets/css/a-guide-to-flexbox/</a></li>
<li><a target="_blank" rel="noopener" href="http://msdn.microsoft.com/zh-cn/subscriptions/downloads/hh673531.aspx">http://msdn.microsoft.com/zh-cn/subscriptions/downloads/hh673531.aspx</a></li>
<li><a target="_blank" rel="noopener" href="http://css-tricks.com/old-flexbox-and-new-flexbox/">http://css-tricks.com/old-flexbox-and-new-flexbox/</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://yanni4night.github.io/2014/04/29/2014-04-29-getelementsbyname-in-document/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Yanni4night">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/04/29/2014-04-29-getelementsbyname-in-document/" class="post-title-link" itemprop="url">getElementsByName方法的出身</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-04-29 00:00:00" itemprop="dateCreated datePublished" datetime="2014-04-29T00:00:00+08:00">2014-04-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-11 18:44:30" itemprop="dateModified" datetime="2022-04-11T18:44:30+08:00">2022-04-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/js/" itemprop="url" rel="index"><span itemprop="name">js</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/04/29/2014-04-29-getelementsbyname-in-document/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/04/29/2014-04-29-getelementsbyname-in-document/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h6 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h6><p>在几个 <code>getElementsBy*</code> 方法中，<code>getElementsByName</code> 算是比较特殊的，表面上看即只有它不能在 <code>Element</code> 上调用。</p>
<p><a target="_blank" rel="noopener" href="http://www.w3.org/">W3C</a> 将该方法定义在 <a target="_blank" rel="noopener" href="http://www.w3.org/TR/2003/REC-DOM-Level-2-HTML-20030109/html.html#ID-26809268">HTMLDocument</a> 接口中：</p>
<pre><code>interface HTMLDocument : Document &#123;
           attribute DOMString       title;
  readonly attribute DOMString       referrer;
  readonly attribute DOMString       domain;
  readonly attribute DOMString       URL;
           attribute HTMLElement     body;
  readonly attribute HTMLCollection  images;
  readonly attribute HTMLCollection  applets;
  readonly attribute HTMLCollection  links;
  readonly attribute HTMLCollection  forms;
  readonly attribute HTMLCollection  anchors;
           attribute DOMString       cookie;
    
  void               open();
  void               close();
  void               write(in DOMString text);
  void               writeln(in DOMString text);
  NodeList           getElementsByName(in DOMString elementName);
&#125;;
</code></pre>
<p>按照此定义， <code>getElementsByName</code> 方法应该仅存在于 <code>HTMLDocument</code> 中而非 <code>Document</code> 中。在能够访问 <code>Document</code> 接口的浏览器（Opera，Chrome，Firefox，Safari和 Internet Explorer 10）中，测试下列代码：</p>
<pre><code>!!Document.prototype.getElementsByName
</code></pre>
<p>结果如下：</p>
<table>
<thead>
<tr>
<th align="center">浏览器</th>
<th align="center">Opera</th>
<th align="center">Chrome</th>
<th align="center">Firefox</th>
<th align="center">Safari</th>
<th align="center">IE10</th>
</tr>
</thead>
<tbody><tr>
<td align="center">结果</td>
<td align="center">false</td>
<td align="center">true</td>
<td align="center">false</td>
<td align="center">true</td>
<td align="center">true</td>
</tr>
</tbody></table>
<p>分别观察一下 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Mozilla/Gecko">Gecko</a> 和 <a target="_blank" rel="noopener" href="http://www.webkit.org/">Webkit</a> 关于 <code>(HTML)Document</code> 部分的 IDL ：<br>​<br>    &#x2F;&#x2F;Gecko 中 HTMLDocument.webidl 文件<br>    interface HTMLDocument : Document {<br>        NodeList getElementsByName(DOMString elementName);<br>    };<br>    &#x2F;&#x2F;Webkit 中 Document.idl 文件<br>    interface Document : Node {<br>        NodeList getElementsByName([Default&#x3D;Undefined] optional DOMString<br>    }</p>
<p>可见两者将 <code>getElementsByName</code> 定义在了不同的接口中，似乎 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Mozilla/Gecko">Gecko</a> 的做法更符合 <a target="_blank" rel="noopener" href="http://www.w3.org/">W3C</a> 规范。</p>
<p>对此的解释可能是 <a target="_blank" rel="noopener" href="http://www.webkit.org/">Webkit</a> 和 <code>Internet Explorer</code> 按照 <a target="_blank" rel="noopener" href="http://www.whatwg.org/specs/web-apps/current-work/multipage/dom.html#document">whatwg</a> 的 HTML5 草案进行了实现。</p>
<h6 id="返回类型"><a href="#返回类型" class="headerlink" title="返回类型"></a>返回类型</h6><p>关于 <code>getElementsBy*</code> 方法的返回类型，<a target="_blank" rel="noopener" href="http://dom.spec.whatwg.org/#document">whatwg</a> 规定为 <code>HTMLCollection</code> ， <a target="_blank" rel="noopener" href="http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#i-Document">W3C</a> 规定为 <code>NodeList</code> 。<code>HTMLCollection</code> 和 <code>NodeList</code> 两者很类似，都有 length 属性，都可以用数字索引或 <code>item()</code> 方法方位其中元素。但其差异也是明显的，前者成员为 <code>HTMLElement</code> ，而后者为 <code>Node</code> ，前者拥有 <code>namedItem()</code> 方法。现代浏览器对其实现不一致：</p>
<table>
<thead>
<tr>
<th align="center">浏览器</th>
<th align="center">Opera&#x2F;Safari&#x2F;Android</th>
<th align="center">Chrome&#x2F;Firefox</th>
<th align="center">Internet Explorer(+WP8)</th>
</tr>
</thead>
<tbody><tr>
<td align="center">getElementsByTagName</td>
<td align="center">NodeList</td>
<td align="center">HTMLCollection</td>
<td align="center">HTMLCollection</td>
</tr>
<tr>
<td align="center">getElementsByName</td>
<td align="center">NodeList</td>
<td align="center">NodeList</td>
<td align="center">HTMLCollection</td>
</tr>
<tr>
<td align="center">getElementsByClassName</td>
<td align="center">NodeList</td>
<td align="center">HTMLCollection</td>
<td align="center">HTMLCollection</td>
</tr>
</tbody></table>
<p>显然应该退化到 <code>Node</code> 和 <code>NodeList</code> 进行编程，避免依赖特定的类型返回值。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://yanni4night.github.io/2014/04/28/2014-04-28-http-connection-header/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Yanni4night">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 人过不留名 雁过不留声">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/04/28/2014-04-28-http-connection-header/" class="post-title-link" itemprop="url">HTTP协议的Connection头</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-04-28 00:00:00" itemprop="dateCreated datePublished" datetime="2014-04-28T00:00:00+08:00">2014-04-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-11 18:44:30" itemprop="dateModified" datetime="2022-04-11T18:44:30+08:00">2022-04-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/http/" itemprop="url" rel="index"><span itemprop="name">http</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/04/28/2014-04-28-http-connection-header/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/04/28/2014-04-28-http-connection-header/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>Connection</code> 是一种 HTTP 通用头，应用于 HTTP 请求与响应首部之中，几乎广泛地存在于每一个可见的连接之中。最常见的取值为 <code>close</code> 与 <code>keep-alive</code> ，前者表示请求响应完成之后立即关闭连接，后者表示连接不立即关闭，可以期望继续响应下一个请求。</p>
<p><code>close</code> 很容易理解，关于 <code>keep-alive</code> ，我们知道 HTTP 建立在 TCP 传输层协议之上，而 TCP 的建立需要握手，关闭需要发通知，这些步骤都需要时间，带给 HTTP 的就是请求响应时延。</p>
<p><code>close</code> 模式请求3个资源的时间线是这样的：</p>
<pre>
服务器--------------------------------------------
        /   \           /   \            / \
       /     \         /     \          /   \
      /       \       /       \        /     \
浏览器--------------------------------------------
</pre>

<p>那么 <code>keep-alive</code> 模式就可能就是这样的：</p>
<pre>
服务器--------------------------------------------
        /   \     /   \     / \
       /     \   /     \   /   \
      /       \ /       \ /     \
浏览器--------------------------------------------
</pre>

<p>这里忽略了软件的数据处理时延，可以明显的看到节省了 TCP 连接建立时间和连接关闭时间所带来的益处。另外，这种方式也可以避免 TCP 多次经历<code>慢启动</code>过程，其带来的时间受益并没有在图中表现出来。</p>
<p>这样看来，<code>keep-alive</code> 应该一直使用来提高 web 加载性能。</p>
<h6 id="哑代理问题"><a href="#哑代理问题" class="headerlink" title="哑代理问题"></a>哑代理问题</h6><p>HTTP 首部可分为<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2616#section-13.5.1">两类</a>，<code>hop-by-hop</code> 和 <code>end-to-end</code>：</p>
<blockquote>
<ul>
<li><p>End-to-end headers  which are  transmitted to the ultimate<br>recipient of a request or response. End-to-end headers in<br>responses MUST be stored as part of a cache entry and MUST be<br>transmitted in any response formed from a cache entry.</p>
</li>
<li><p>Hop-by-hop headers  which are meaningful only for a single<br>transport-level connection  and are not stored by caches or<br>forwarded by proxies.</p>
</li>
</ul>
</blockquote>
<p>显然 <code>hop-by-hop</code> 是不能缓存不能被代理转发的，下面即 HTTP 1.1 定义的8个 <code>hop-by-hop</code> 首部，其它均属于 <code>end-to-end</code> 首部。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2616#section-14.10">Connection</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2068#section-19.7.1.1">Keep-Alive</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2616#section-14.33">Proxy-Authenticate</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2616#section-14.34">Proxy-Authorization</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2616#section-14.39">TE</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2616#section-14.40">Trailers</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2616#section-14.41">Transfer-Encoding</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2616#section-14.42">Upgrade</a></li>
</ul>
<p>因此理论上 <code>Connection</code> 首部是不能被代理、中继等中间 HTTP 节点转发的，另外根据 <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2616">RFC2616</a> 的定义：</p>
<blockquote>
<p>Connection &#x3D; “Connection” “:” 1#(connection-token)</p>
<p>connection-token  &#x3D; token</p>
</blockquote>
<p><code>Connection</code> 列举的所有 HTTP 首部都不能被转发，如一个请求头中如下：</p>
<blockquote>
<p>GET &#x2F; HTTP&#x2F;1.1</p>
<p>Accept: <em>&#x2F;</em></p>
<p>Connection:Proxy-Time Non-Header Keep-Alive</p>
<p>Proxy-Time:0810</p>
<p>Keep-Alive: max&#x3D;5 timeout&#x3D;120</p>
</blockquote>
<p>经过代理后应该被修改为：</p>
<blockquote>
<p>GET &#x2F; HTTP&#x2F;1.1</p>
<p>Accept: <em>&#x2F;</em></p>
</blockquote>
<p>即移除 <code>Connection</code> 首部及其列举的其它首部。但这是理想情况，万维网上还工作着无数称之为<code>哑代理</code>的盲中继：它们仅把数据按字节转发，并不理会 HTTP 首部中的意义。在这种情况下，就会出现一些非预期的状况：</p>
<pre class="courier">
    ____       keep-alive      ____      keep-alive       ____
   |    |   =+++++++++++++++- |    |  =+++++++++++++++-  |    |
   |    |      keep-alive     |    |     keep-alive      |    |
   \____/   -+++++++++++++++= \____/  -+++++++++++++++=  \____/

   Browser                     Proxy                     Server
</pre>

<p>如上图，浏览器向服务器发送带有 <code>Connection:Keep-Alive</code> 的请求，中间经过一个哑代理，从而导致该首部到达服务器。对于服务器来说，代理与浏览器没有什么分别，它认为浏览器（代理）尝试建立 <code>Keep-Alive</code> 连接，便在响应头中发回 <code>Connection:Keep-Alive</code> ，并保持连接开启。哑代理将响应首部原封不动的发回给浏览器，并等待服务器关闭连接。浏览器收到响应数据后立即准备进行下一条请求。此时，浏览器和服务器都认为与对方建立了 <code>Keep-Alive</code> 连接，但是中间的代理确对此一无所知。因此哑代理不认为这条连接上还会有请求，接下来来自浏览器的任何请求都会被忽略。这样，浏览器和服务器都会在代理处挂起，直到一方超时将连接关闭为止。这一过程不仅浪费服务器资源，也使得浏览器响应缓慢或失败。</p>
<h6 id="Proxy-Connection"><a href="#Proxy-Connection" class="headerlink" title="Proxy-Connection"></a>Proxy-Connection</h6><p>一个变通的做法即是引入一个叫做 <code>Proxy-Connection</code> 的新首部。在浏览器后面紧跟代理的情况下，会以 <code>Proxy-Connection</code> 首部取代 <code>Connection</code><br> 首部发送。如果代理不能理解该首部，会透传给服务器，这不会带来任何副作用，服务器仅会将其忽略；如果这个代理足够聪明（有能力支持这种 <code>Keep-Alive</code> 连接），会将 <code>Proxy-Connection</code> 首部替换成 <code>Connection</code> 发送给服务器，从而达到建立双向 <code>Keep-Alive</code> 连接的目的。</p>
<p>我们可以开启 <a target="_blank" rel="noopener" href="http://www.telerik.com/fiddler">Fiddler</a> 并观察 Chrome 或 IE 开发工具中 Network中的请求头，都会有 <code>Proxy-Connection</code> 。Firefox好像并没有发送这个首部，Safari可能同时发送了 <code>Proxy-Connection</code> 和 <code>Connection</code> 首部，<a target="_blank" rel="noopener" href="http://www.telerik.com/fiddler">Fiddler</a> 没有移除 <code>Connection</code> 首部但将 <code>Proxy-Connection</code> 替换为 <code>Connection</code> ，导致出现两个 <code>Connection</code> 首部。</p>
<p>显然，在聪明代理和哑代理共存的链路上，上面的提到的挂起的问题仍然存在，<code>Proxy-Connection</code>并没有从根本上解决问题。其实 <code>Proxy-Connection</code> 也并非是一个标准的协议首部，任何标准或草案中都没有提到它，仅仅是应用广泛罢了。</p>
<h6 id="持久化连接"><a href="#持久化连接" class="headerlink" title="持久化连接"></a>持久化连接</h6><p>HTTP 1.1 已经废弃了使用 <code>Keep-Alive</code>，而以”持久化连接”的概念取代之。与 HTTP 1.0 不同的是，在 HTTP 1.1 中，持久化连接是默认开启的，除非你手动设置 <code>Connection:close</code>。为了避免收到哑代理误转发过来的 <code>Keep-Alive</code> ，HTTP 1.1 代理应当拒绝与所有来自  HTTP 1.0 设备建立持久化连接（实际厂商并非如此）。</p>
<h6 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h6><p>HTTP 1.1 还提供了在持久化连接基础上的一个性能优化特性：<code>请求管道</code>。它可以在一条连接上同时发起多个请求而不必等到前面的请求得到响应，降低网络的环回响应时间，如下图：</p>
<pre>
服务器--------------------------------------------
        /\/\/\/\
       / /\/\/\ \
      / / /\/\ \ \
浏览器--------------------------------------------
</pre>

<p>但使用<code>请求管道</code>有一些限制：</p>
<ul>
<li>连接必须是持久的；</li>
<li>服务器必须按照请求的顺序返回；</li>
<li>浏览器必须能应对部分请求失败的情况，并重试；</li>
<li>不能进行非幂等这类可能带来副作用的请求，如 POST 请求，因为无法安全重试。</li>
</ul>
<p>一些现代的浏览器支持管道但利用尚不广泛，特别是页面使用较多域名的情况下，管道技术更是难以施展。<a href="www.chromium.org/spdy%E2%80%8E">SPDY</a> 技术更进一步，做到了跨域的多路复用，理论上可以让web的加载速度有显著提升，期待该技术的普及。</p>
<h6 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h6><ul>
<li><a target="_blank" rel="noopener" href="http://homepage.ntlworld.com./jonathan.deboynepollard/FGA/web-proxy-connection-header.html">http://homepage.ntlworld.com./jonathan.deboynepollard/FGA/web-proxy-connection-header.html</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2068#section-19.7.1">https://tools.ietf.org/html/rfc2068#section-19.7.1</a></li>
<li><a target="_blank" rel="noopener" href="http://www-archive.mozilla.org/projects/netlib/http/pipelining-faq.html">http://www-archive.mozilla.org/projects/netlib/http/pipelining-faq.html</a></li>
<li><a target="_blank" rel="noopener" href="http://www.guypo.com/technical/http-pipelining-not-so-fast-nor-slow/">http://www.guypo.com/technical/http-pipelining-not-so-fast-nor-slow/</a></li>
<li><a target="_blank" rel="noopener" href="http://www.mnot.net/blog/2011/07/11/what_proxies_must_do">http://www.mnot.net/blog/2011/07/11/what_proxies_must_do</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Yanni4night</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/yanni4night" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  






  




<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"yanni4night","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
